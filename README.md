# Izakaya App
 
 ### 一般ユーザー
  ![一般ユーザートップ画面](https://gyazo.com/caffaa238643a4c1e77b68738296a2dd "一般ユーザー用トップ画面")

 ### 管理者
  ![管理者用トップ画面](https://gyazo.com/059e83e8ae633e52646dcd876bb274c3 "管理者用トップ画面")

# 概要

居酒屋のWebサイトです。

このアプリを使えばお店の予約や、メニューの閲覧、外観・内装などお客さんが知りたい情報を全部知ることができます。

管理者（オーナー、店長）は、個々のメニューに対してのコメント欄など、お客さんからの生の声を聞ける場があるため、お客さんの満足度や改善点の把握も容易になります。


# デモ

[ここから](https://www.izakaya-app.com/)Izakaya Appを体験できます。


**テスト用ログインID**
  * 一般ユーザー
    * test@gmail.com
    * test2020

  * 管理者用
    * admin@admin.com
    * 000aaa

# 利用方法

 ### 一般ユーザー


  - 上記記載の**一般ユーザー**用のログインIDを入力してログインします

  #### 予約方法
   1. トップページの**ご予約はこちらから**をクリックしてください。
   2. 「御予約日時」「御予約時間」「御予約人数」「御予約内容」を入力後**確認画面へ**をクリックしてください。<br />
    （*「御予約日時」は明日以降の日付を選択してください。*）
   3. 上記で入力された内容が確認出来ます。お間違い無ければ**予約する**ボタンをクリックしてください。もし修正したければ**入力画面に戻る**ボタンをクリックすれば先ほどの入力画面に戻る事が出来ます。
   4. **予約する**ボタンをクリックし、予約が完了すると「完了ページ」に遷移し**予約履歴確認**ボタンと**トップページへ戻る**ボタンが表示されますので、今入力された予約内容を確認したい場合が**予約履歴確認**ボタンをクリックしてください。

  #### 予約の変更/キャンセル方法
   1. トップページの**予約履歴**をクリックしてください。
   2. 現在ログインしているユーザーの今日以降の予約の履歴が全件表示されています。
   3. 変更またはキャンセルしたい予約の欄にある**変更する**ボタンまたは**キャンセルする**ボタンをクリックしてください。<br />
      （*予約の変更またはキャンセルは前日まで可能です。当日は行えませんのでご注意ください。*）
   4. **キャンセルする**ボタンをクリックするとキャンセル完了画面へ遷移し、**予約履歴へ戻る**をクリックすれば先程の予約履歴一覧ページへ戻る事が出来ます。
   4. **変更する**ボタンをクリックした場合、予約する時と同じフォームが表示されそこでご予約の変更ができます。
   5. 予約の変更内容の入力が終わったら**予約を変更する**ボタンをクリックしてください。
   6. 予約の編集完了ページに遷移しました、**予約履歴へ戻る**ボタンをクリックしますと、先程の予約履歴一覧ページへ戻る事ができ、編集がうまくいっているか確認する事が出来ます。

  #### メニューの閲覧方法
   1.  トップページから**お飲み物**または**お料理**をクリックしてください。
   2.  最初はメニュー全件が表示されています。それぞれのメニューは上から「メニュー画像」「メニュー名」「値段」「カテゴリー名」が記載されています。横スクロールすることにより、メニュー全件を閲覧する事が出来ます。
   3.  それぞれのメニューの画像の下にあるハートマークをクリックする事で「いいね」をする事が出来ます。
   4.  ハートの右にある数字は「いいね」が押されたトータルの数を示しています。
   5.  ページ上部のカテゴリー名毎のラジオボタンをクリックし、**検索**ボタンをクリックしますと選択されたカテゴリーのみのメニューが表示されます。
   6.  メニューの画像をクリックしますと、そのメニューの詳細ページに遷移し左側にはメニューの詳細、右側にはそのメニューに対してのコメントが表示されています。
   7.  メニューの詳細は上から「メニューの画像」「メニュー名」「メニューの詳細」「値段」「カテゴリー名」が記載されています。
   8.  右側のコメント欄はコメントされた日付が古い順に上から表示されており、最初は2件のみですが**全件表示する**ボタンをクリックしますと今までのコメントを全件閲覧できます。
   9.  白いテキストボックスにコメント内容を入力し、**コメントを送信する**ボタンをクリックしますとコメントを残すことが出来ます。
   10. **一覧へ戻る**ボタンをクリックしましたら、先程のメニュー一覧ページへ戻る事が出来ます。

  #### 外観/内装の閲覧方法
   1. トップページから**外観/内装**をクリックしてください。
   2. お店の外観と内装の写真が全件表示されています。

  #### ブログの閲覧方法
   1.  トップページから**ブログ**をクリックしてください。
   2.  ブログの一覧が新着順で表示されています。
   3.  それぞれのブログは左から「画像」「タイトル」「ブログが作成された日付」が記載されています。
   4.  それぞれのブログの一番左にあるハートマークをクリックする事で「いいね」する事が出来ます。
   5.  ハートの右にある数字は「いいね」が押されたトータルの数を示しています。
   6.  それぞれのブログの画像をクリックするとそのブログの詳細ページに遷移する事が出来ます。
   7.  詳細ページの左側にはブログの詳細、右側にはそのブログに対してのコメントが表示されています。
   8.  ブログの詳細は上から「画像」「タイトル」「ブログの内容」「ブログが作成された日付」が記載されています。
   9.  右側のコメント欄はコメントされた日付が古い順から上に表示されており、最初は4件のみですが**全件表示する**ボタンをクリックしますと今までのコメントを全件閲覧できます。
   10. 白いテキストボックスにコメント内容を入力し、**コメントを送信する**ボタンをクリックしますとコメントを残すことが出来ます。
   11. **一覧へ戻る**ボタンをクリックしましたら、先程のブログ一覧ページへ戻る事が出来ます。

  #### ご意見/ご要望の使い方
   1. トップページから**ご意見/ご要望**をクリックしてください。
   2. メッセージが送信された日付が古い順から上に表示されています。
   3. チャット画面が表示され、向かって左側は自分以外のユーザーが送信したメッセージ、右側は自分が送信したメッセージが表示されています。
   4. 向かって左側には「メッセージを送信したユーザーのニックネーム」「メッセージの内容」「メッセージが送信された日付」が表示されています。
   5. 向かって右側には「メッセージの内容」「メッセージが送信された日付」が表示されています。
   6. チャット画面下部にある白いテキストボックスにメッセージ内容を入力し、その右にある**紙飛行機**ボタンをクリックしますとメッセージを送信する事が出来ます。


 ### 管理者

   - 上記記載の*管理者*用のログインIDを入力してログインします

  #### 予約の確認方法
   1. トップページから**予約表**をクリックしてください。
   2. 現在予約されている*御予約日が本日以降*の履歴が全件表示されています。
   3. 御予約の日付が本日に近い順に表示されています。

  #### メニューの新規投稿/変更/削除の方法
   1. トップページか**お飲み物**または**お料理**をクリックしてください。
   2. 新規投稿
      1. メニューの一覧ページの上部にある**新規投稿**ボタンをクリックしてください。
      2. フォームに「商品名」「詳細」「値段」「カテゴリー」「画像」を入力/選択し**投稿する**ボタンをクリックしてください。
      3. 投稿完了ページに遷移され**一覧へ戻る**ボタンをクリックしますとメニュー一覧ページへ遷移出来ます。
   3. 編集
      1. メニュー一覧ページから編集したいメニューの画像をクリックし、詳細ページに遷移してください。
      2. 詳細ページ下部にある**編集**ボタンをクリックしてください。
      3. 編集フォームに変更したい内容を入力し**投稿する**ボタンをクリックしてください。
      4. 編集完了ページに遷移され**詳細へ戻る**ボタンをクリックしますと、今編集したメニューの詳細画面に遷移出来ます。
   4. 削除
      1. メニュー一覧ページから削除したいメニューの画像をクリックし、詳細ページに遷移してください。
      2. 詳細ページ下部にある**削除**ボタンをクリックしてください。
      3. 削除完了ページに遷移され**一覧へ戻る**ボタンをクリックしますと、メニュー一覧ページに遷移出来ます。

  #### 外観/内装画像の新規投稿/変更/削除の方法
   1. トップページから**外装/内装**をクリックしてください。
   2. 新規投稿
      1. 外観/内装一覧ページ上部にある**新規投稿**ボタンをクリックしてください。
      2. フォームに「画像」を選択し**投稿する**ボタンをクリックしてください。
      3. 投稿完了ページに遷移され**一覧へ戻る**ボタンをクリックしますと外観/内装一覧ページへ遷移出来ます。
   3. 編集
      1. 外観/内装一覧ページから編集したい画像の下部にある**編集**ボタンをクリックしてください。
      2. 編集フォームに変更したい画像を選択し**投稿する**ボタンをクリックしてください。
      3. 編集完了ページに遷移され**一覧へ戻る**ボタンをクリックしますと、外観/内装一覧ページに遷移出来ます。
   4. 削除
      1. 外観/内装一覧ページから削除したい画像の下部にある**削除**ボタンをクリックしてください。
      2. 削除完了ページに遷移され**一覧へ戻る**ボタンをクリックしますと、外観/内装一覧ページに遷移出来ます。

  #### ブログの新規投稿/編集/削除の方法
   1. トップページから**ブログ**をクリックしてください。
   2. 新規投稿
      1. ブログ一覧ページ上部にある**新規投稿**ボタンをクリックしてください。
      2. フォームに「画像」「タイトル」「テキスト」を入力し**投稿する**ボタンをクリックしてください。
      3. 投稿完了ページに遷移され**一覧へ戻る**ボタンをクリックしますとブログ一覧ページへ遷移出来ます。
   3. 編集
      1. ブログ一覧ページの中から編集したいブログの欄の**編集**ボタンをクリックしてください。
      2. 編集フォームに変更したい内容を入力し**投稿する**タンをクリックしてください。
      3. 編集完了ページに遷移され**詳細へ戻る**をクリックすると今編集したブログの詳細ページに遷移することが出来ます。
   4. 削除
      1. ブログ一覧ページの中から削除したいブログの欄の**削除**ボタンをクリックしてください。
      2. 削除完了ページに遷移され**一覧へ戻る**ボタンをクリックしますと、ブログ一覧ページに遷移出来ます。


# 目指した課題解決

  個人経営している居酒屋のオーナー、店長に向けたアプリケーションです。<br />
  大手の広告媒体に頼れるほどの資金力がなく、予約の受付は電話または店頭での受付などになってしまっているような店舗様の手助けが出来ればと思いこのアプリケーションを制作いたしました。<br />
  また、お客様からの生の声やそれぞれのメニューの人気度が知れるようにコメントやいいねを残せるような機能も実装しております。
  

# 要件定義

  | 機能                  | 目的                                                       | 詳細                                                                                           |
  |-----------------------|------------------------------------------------------------|------------------------------------------------------------------------------------------------|
  | ユーザー新規登録機能  | 管理者との区別をするため                                   | ニックネーム/名前/名前（カナ）/電話番号/年齢/パスワードを入力すると登録できる                  |
  | ユーザーログイン機能  | すでに登録されているユーザーと区別するため                 | 登録してあるメールアドレス/パスワードを入力するとログインできる                                |
  | 予約機能              | お店の予約を手軽にできるようにするため                     | 御予約日/御予約時間/御予約人数/御予約内容を入力/選択すると予約が出来る                         |
  | 予約履歴確認機能      | 予約した日付や時間、人数を確認できるようにするため         | 現在ログインしてるユーザーの本日以降の予約履歴が確認出来る                                     |
  | 予約編集機能          | 予約した情報を変更できるようにするため                     | 御予約日当日の予約変更は出来ない                                                               |
  | 予約キャンセル機能    | 予約をキャンセルできるようにするため                       | 御予約日当日の予約キャンセル出来ない                                                           |
  | メニュー新規投稿機能  | 新メニューが出たら投稿できるようにするため                 | 管理者のみメニューの新規投稿が出来る                                                           |
  | メニュー編集機能      | メニューの情報をいつでも編集できるようにするため           | 管理者のみメニューの編集が出来る                                                               |
  | メニュー削除機能      | メニューの情報をいつでも削除できるようにするため           | 管理者のみメニューの削除が出来る                                                               |
  | メニュー一覧表示機能  | お店にあるメニューを閲覧できるようにするため               | 現在投稿されているメニュー全件が閲覧出来る                                                     |
  | メニューコメント機能  | 個々のメニューに対して感想やコメントを残せるようにするため | 個々のメニューのコメントの閲覧と投稿が出来る                                                   |
  | メニューいいね機能    | 個々のメニューの人気度を分かりやすくするため               | いいねボタンを押すと「誰が」「どのメニュー」に対していいねを押したのかが保存される             |
  | メニュー検索機能      | 数あるメニューを簡単に検索できるようにするため             | 押されたボタンのカテゴリーに該当するメニューのみ表示される                                     |
  | ブログ新規投稿機能    | ブログの新規投稿がいつでもできるようにするため             | 管理者のみブログの新規投稿が出来る                                                             |
  | ブログ編集機能        | ブログの内容をいつでも編集できるようにするため             | 管理者のみブログの編集が出来る                                                                 |
  | ブログ削除機能        | ブログの内容をいつでも削除できるようにするため             | 管理者のみブログの削除が出来る                                                                 |
  | ブログ一覧表示機能    | 今までのブログの投稿を簡単に閲覧出来るようにするため       | 現在投稿されているブログ全件が閲覧出来る                                                       |
  | ブログコメント機能    | 個々のブログに対しての感想やコメントを残せるようにするため | 個々のブログのコメントと投稿が出来る                                                           |
  | ブログいいね機能      | 個々のブログの内容の評判を分かりやすくするため             | いいねボタンを押すと「誰が」「どのメニュー」に対していいねを押したのかが保存される             |
  | チャット機能          | お客さんからの要望などを気軽にやり取り出来るようにするため | 自分が送信したメッセージは画面の右側に、他の人が送信したメッセージは画面の左側に表示されている |
  | 外観/内装一覧表示機能 | お店の外観や内装を知ってもらうため                         | 現在投稿されている外観/内装の全件が閲覧出来る                                                  |
  | 外観/内装新規投稿機能 | 外観/内装の新規投稿がいつでもできるようにするため          | 管理者のみ外観/内装の新規投稿が出来る                                                          |
  | 外観/内装編集機能     | 外観/内装の編集がいつでもできるようにするため              | 管理者のみ外観/内装の編集が出来る                                                              |
  | 外観/内装削除機能     | 外観/内装の削除がいつでもできるようにするため              | 管理者のみ外観/内装の削除が出来る                                                              |
  | 管理者専用機能        | 管理者権限を付与することによって一般ユーザーと区別するため | ユーザー管理テーブルのadminカラムを一般ユーザーはデフォルトでFalseだが管理者のみTrueにしてある |


# 実装した機能についてのGIFと説明

  ### ユーザー新規登録機能

  ### ユーザーログイン機能

  ### 予約機能

  ### 予約履歴確認機能

  ### 予約編集機能

  ### 予約キャンセル機能

  ### メニュー新規登録機能

  ### メニュー編集機能

  ### メニュー削除機能

  ### メニュー一覧表示機能

  ### メニューコメント機能

  ### メニューいいね機能

  ### メニュー検索機能

  ### ブログ新規投稿機能

  ### ブログ編集機能

  ### ブログ削除機能

  ### ブログ一覧表示機能

  ### ブログコメント機能

  ### ブログいいね機能

  ### チャット機能

  ### 外観/内装一覧表示機能

  ### 外観/内装新規投稿機能

  ### 外観/内装編集機能

  ### 外観/内装削除機能

  ### 管理者機能


# 実装予定の機能

  - [ ] メニューの検索ボタンに「すべて」という項目を追加
  - [ ] メニュー検索の非同期化
  - [ ] チャットを1対1でも出来るようにルーム作成機能の追加
  - [ ] チャットを送信する際の非同期化
  - [ ] チャットで画像を送信
  - [ ] ユーザー情報の編集機能を追加
  - [ ] 外観/内装のカテゴリー検索機能の追加
  - [ ] スマホでも操作できるようなレスポンシブ対応


# テーブル設計


## usersテーブル

| Column       | Type    | Options        |
|--------------|---------|----------------|
| nickname     | string  | null: false    |
| name         | string  | null: false    |
| name_kana    | string  | null: false    |
| age          | integer | null: false    |
| password     | string  | null: false    |
| phone_number | string  | null: false    |
| email        | string  | null: false    |
| admin        | boolean | default: false |

### Association
- has_many :books
- has_many :visuals
- has_many :blogs
- has_many :blog_comments
- has_many :blog_likes
- has_many :room_users
- has_many :rooms, through: :room_users
- has_many :messages
- has_many :foods
- has_many :food_comments
- has_many :food_likes
- has_many :drinks
- has_many :drink_comments
- has_many :drink_likes


## blogsテーブル

| Column | Type       | Options           |
|--------|------------|-------------------|
| user   | references | foreign_key: true |
| title  | string     | null: false       |
| text   | text       | null: false       |

### Association
- belongs_to :user
- has_many :blog_comments, dependent: :destroy
- has_many :blog_likes, dependent: :destroy
- has_one_attached :image


## blog_commentsテーブル

| Column  | Type       | Options           |
|---------|------------|-------------------|
| user    | references | foreign_key: true |
| blog    | references | foreign_key: true |
| comment | string     | null: false       |

### Association
- belongs_to :user
- belongs_to :blog

## blog_likesテーブル

| Column | Type       | Options           |
|--------|------------|-------------------|
| user   | references | foreign_key: true |
| blog   | references | foreign_key: ture |

### Association
- belongs_to :user
- belongs_to :blog


### visualsテーブル

| Column | Type       | Options           |
|--------|------------|-------------------|
| user   | references | foreign_key: true |

### Association
- belongs_to :user
- has_one_attached :image


## messagesテーブル

| Column    | Type       | Options           |
|-----------|------------|-------------------|
| user      | references | foreign_key: true |
| content   | string     | null: false       |

### Association
- belongs_to :user
- has_one_attached :image

## booksテーブル

| Column              | Type       | Options           |
|---------------------|------------|-------------------|
| user                | references | foregin_key: true |
| reserve_date        | date       | null: false       |
| reserve_time        | time       | null: false       |
| number_reserve      | integer    | null: false       |
| reserve_categoty_id | integer    | null: false       |

### Association
- belongs_to :user


## drinksテーブル

| Column            | Type       | Options           |
|-------------------|------------|-------------------|
| user              | references | foregin_key: true |
| title             | string     | null: false       |
| detail            | string     | null: false       |
| price             | integer    | null: false       |
| drink_category_id | integer    |                   |

- belongs_to :user
- has_many :drink_comments, dependent: :destroy
- has_many :drink_likes, dependent: :destroy
- has_one_attached :image


## drink_commentsテーブル

| Column  | Type       | Options           |
|---------|------------|-------------------|
| user    | references | foregin_key: true |
| drink   | references | foregin_key: true |
| comment | string     | null: false       |

### Association
- belongs_to :user
- belongs_to :drink

## drink_likesテーブル

| Column | Type       | Options           |
|--------|------------|-------------------|
| user   | references | foregin_key: true |
| drink  | references | foregin_key: true |

### Association
- belongs_to :user
- belongs_to :drink


## foodsテーブル

| Column            | Type       | Options           |
|-------------------|------------|-------------------|
| user              | references | foregin_key: true |
| title             | string     | null: false       |
| detail            | string     | null: false       |
| price             | integer    | null: false       |
| food_category_id  | integer    |                   |

### Association
- belongs_to :user
- has_many :food_comments
- has_many :food_likes
- has_one_attached :image


## food_commentsテーブル

| Column  | Type       | Options           |
|---------|------------|-------------------|
| user    | references | foregin_key: true |
| food    | references | foregin_key: true |
| comment | string     | null: false       |

### Association
- belongs_to :user
- belongs_to :food

## food_likesテーブル

| Column | Type       | Options           |
|--------|------------|-------------------|
| user   | references | foregin_key: true |
| food   | references | foregin_key: true |

### Association
- belongs_to :user
- belongs_to :food


# ローカルでの動作方

  #### ダウンロードとインストールの手順
  1. このリポジトリのクローンを作成してください<br />
  `$ git clone https://github.com/Ryo-Nogawa/izakaya_app.git` <br />
  2. リポジトリに移動してください<br />
  `$ cd izakaya_app`<br />
  3. 依存関係をインストールしてください<br />
  `$ bundle install` <br />
  `$ yarn install`<br />
  4. データベースを作成してください<br />
  `$ rails db:create`<br />
  5. データベースを実行してください<br />
  `$ rails db:migrate`<br />
  6. seedファイルを実行してください<br />
  `$ rails db:seed`<br />
  7. アプリケーションを実行してください<br />
  `$ rails s`<br />

# 開発環境

  * Ruby on Rails 6.0.0
  * MySQL

